# Using edmTracerCompactLogViewer.py

## Introduction
The `edmTracerCompactLogViewer.py` is used to create a human understandable representation of the file generated by the `Tracer` service. Two representations are possible: text and interactive web.

## Creating Tracer file
To create a Tracer file, add the following to a cmsRun configuration
```python
process.add_(cms.Service("Tracer",
                         useMessageLogger=cms.untracked.bool(False),
                         fileName=cms.untracked.string("<name of file>")))
```
Where `"<name of file>"` is whatever name you want to use for the file that will hold the Tracer output. The use of `useMessageLogger=cms.untracked.bool(False)` is optional but does
help avoid creating a large output from cmsRun.

## Processing Tracer file
The Tracer file can either be processed to output a human readable text output (similar to what the Tracer service does when `useMessageLogger==True`) or create a `data.js` file that
can be used by a web application.

### text output
Issue the shell command
```edmTracerCompactLogViewer.py <name of file>```

The script will output to the screen the text output. It is probably most useful to redirect the output to a file.

If you only want to see the framework transitions and not all the information about ED or ES modules, you can use the option `-f`.

### web output
Issue the shell command
```edmTracerCompactLogViewer.py -w <name of file>```

The script will output a new file named `data.json`.

If you only want to see the framework transitions and not all the information about ED or ES modules, you can use the option `-f`.
You can also have all activities related to each module grouped by using the `-m` option.

#### viewing web data

The web data is is _chrome trace log_ format and can be read natively by the Chrome application. To so, load the data onto the same machine as Chrome will be running. After starting chrome, type `chrome://tracing/` into the search bar. This will startup the built in viewer. To choose the data file, click on the `load` button. The `?` button explains the various ways to interact with the trace.

If one does not want to use Chrome, other open source software says it supports displaying that format. To find one try searching the term `chrome trace viewer`. The way supported directly by the chromium group can be found at `https://chromium.googlesource.com/catapult`. 
