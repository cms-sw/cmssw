#!/usr/bin/env python3

import sys
# Get collectionand SoAs names
if len(sys.argv) < 3:
  raise RuntimeError("Expecting at least one portable collection name and one layout name.")

collectionName = sys.argv[1]
layouts = sys.argv[2:]  
for i in range(len(layouts)):
  layouts[i] += "<128, false>"

print("In <module>/src/classes_def.xml (with necessary includes in <module>/src/classes.h):\n")
print("<lcgdict>")
print("  <!-- Collection declaration for dictionary -->")
print("  <class name=\"%s\" rntupleStreamerMode=\"true\"/>"% collectionName)
print("  <!-- %s::Layout must be listed before the aliased-to type -->"% collectionName)
print("  <class name=\"%s::Layout\"/>"% collectionName)
print()
for l in layouts:
  print("  <class name=\"%s\"/>"% l)
print()
print("  <class name=\"edm::Wrapper<%s>\" splitLevel=\"0\"/>"% collectionName)
print("</lcgdict>")
