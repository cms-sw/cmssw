<?xml version="1.0"?>
<DDDefinition xmlns="http://www.cern.ch/cms/DDL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.cern.ch/cms/DDL ../../../DetectorDescription/Schema/DDLSchema.xsd">

<ConstantsSection label="tibmodpar.xml" eval="true">
 <Constant name="zero"                value="0.0*fm"/>
 <Constant name="ModuleDx"            value="3.900*cm"/>
 <Constant name="SSModuleDy"          value="1.100*mm"/>
 <Constant name="DSModuleDy"          value="2.475*mm"/>
 <Constant name="DSModuleSideCutDx"   value="3.3*mm"/>
 <Constant name="DSModuleSideCutDy"   value="0.8*mm"/>
 <Constant name="DSModuleSideCutX"    value="36.*mm"/>
 <Constant name="DSModuleSideCutY"    value="1.775*mm"/>
 <Constant name="SideCutExtraZ"       value="0.1*mm"/>
 <Constant name="ModuleDz"            value="81.65*mm"/>
 <Constant name="HybridDx"            value="23.50*mm"/>
 <Constant name="HybridDy"            value="0.565*mm"/>
 <Constant name="HybridDz"            value="12.65*mm"/>
 <Constant name="HybridZ"             value="[ModuleDz]-[HybridDz]"/>
 <Constant name="PARPhiDx"                value="32.00*mm"/>
 <Constant name="PADy"                value="0.565*mm"/>
 <Constant name="PARPhiDz"               value="4.500*mm"/>
 <Constant name="PAZ"                 value="[ModuleDz]-2*[HybridDz]-[PARPhiDz]"/>
 <Constant name="CFFrameHybDz"        value="12.40*mm"/>
 <Constant name="CFFrameHybZ"         value="-[tibmodpar:ModuleDz]+[tibmodpar:CFFrameHybDz]"/>
 <Constant name="CFFrameHybRPhiDx"    value="30.00*mm"/>
 <Constant name="CFFrameDy"           value="0.250*mm"/>
 <Constant name="CFFrameDz"           value="[ModuleDz]-[CFFrameHybDz]"/>
 <Constant name="CFFrameZ"            value="[ModuleDz]-[CFFrameDz]"/>
 <Constant name="CFFrameHoleDx"       value="30.00*mm"/>
 <Constant name="CFFrameHoleDz"       value="59.50*mm"/>
 <Constant name="CFFrameHoleOffset"   value="1.000*mm"/>
 <Constant name="CFFrameHoleZ"        value="[tibmodpar:WaferZ]-[tibmodpar:CFFrameHybDz]"/>
 <Constant name="KaptonBoxDy"         value="0.150*mm"/>
 <Constant name="KaptonBoxDz"         value="[ModuleDz]-[HybridDz]-[PARPhiDz]"/>
 <Constant name="KaptonBoxZ"          value="[tibmodpar:HybridDz]+[tibmodpar:PARPhiDz]"/>
 <Constant name="KaptonBoxHoleDx"     value="27.50*mm"/>
 <Constant name="KaptonBoxHoleDz"     value="57.50*mm"/>
 <Constant name="KaptonBoxHoleZ"      value="[tibmodpar:KaptonBoxHoleDz]-[tibmodpar:KaptonBoxDz]"/>
 <Constant name="StereoAngle"         value="5.729578*deg"/>
 <Constant name="TrapSterTheta"       value="atan(0.5*tan([tibmodpar:StereoAngle]))"/> <!-- Trapezoid parameter -->
 <Constant name="HybLedgeDz"          value="3.60*mm"/>
 <Constant name="HybLedgeSideDx"      value="3.0*mm"/>
 <Constant name="HybLedgeSideDz"      value="12.0*mm"/>
 <Constant name="DummyLedgeDz"        value="5.0*mm"/>
 <Constant name="LedgeBoxDx"          value="[tibstringpar:CoolBoxDx]"/>
 <Constant name="LedgeBoxDy"          value="[tibstringpar:CoolBoxDy]-[tibstringpar:CoolPipeDy]"/>
 <Constant name="SSLedgeBoxY"         value="-[tibmodpar:SSModuleDy]-[tibmodpar:LedgeBoxDy]"/>
 <Constant name="DSLedgeBoxY"         value="-[tibmodpar:DSModuleDy]-[tibmodpar:LedgeBoxDy]"/>
 <Constant name="AOHLedgeDz"          value="1.5*mm"/>
 <Constant name="AOHLedgeSideDx"      value="1.5*mm"/>
 <Constant name="AOHLedgeSideDz"      value="15.0*mm"/>
 <Constant name="AOHModOffset"        value="6.0*mm"/>
 <Constant name="AOHLedgeModOffset"   value="[tibmodpar:AOHModOffset]+[tibmodpar:AOHLedgeSideDz]"/>
 <Constant name="SSAOHBoxDx"          value="18.0*mm"/>
 <Constant name="DSAOHBoxDx"          value="[tibstringpar:CoolBoxDx]"/>
 <Constant name="AOHBoxDy"            value="[tibmodpar:SSModuleDy]"/>
 <Constant name="AOHToMod"            value="6.0*mm"/>
 <Constant name="AOHBoxDz"            value="[tibmodpar:AOHLedgeSideDz]+0.5*[tibmodpar:AOHToMod]"/>
 <Constant name="SSAOHBoxY"           value="-[tibmodpar:SSModuleDy]+[tibmodpar:AOHBoxDy]"/>
 <Constant name="SSAOHBoxX"           value="[tibmodpar:LedgeBoxDx]-[tibmodpar:SSAOHBoxDx]"/>
 <Constant name="DSAOHBoxY"           value="-[tibmodpar:DSModuleDy]+[tibmodpar:AOHBoxDy]"/>
 <Constant name="ModCool1Dx"          value="2.350*cm"/>
 <Constant name="ModCoolDy"           value="0.015*cm"/>
 <Constant name="ModCool1Dz"          value="0.350*cm"/>
 <Constant name="ModCool1X"           value="0.000*cm"/>
 <Constant name="ModCool1Z"           value="7.800*cm"/>
 <Constant name="ModCool2Dx"          value="0.300*cm"/>
 <Constant name="ModCool2Dz"          value="1.250*cm"/>
 <Constant name="ModCool2X"           value="2.650*cm"/>
 <Constant name="ModCool2Z"           value="6.900*cm"/>
 <Constant name="SSWaferDx"           value="31.6440*mm"/>
 <Constant name="DSWaferDx"           value="31.6640*mm"/>
 <Constant name="WaferDy"             value="59.4805*mm"/>
 <Constant name="WaferDz"             value="0.160*mm"/>
 <Constant name="ActiveDz"            value="[WaferDz]-[tracker:BackPlaneDz]"/>
 <Constant name="SSActiveDx"          value="30.720*mm"/> <!-- Actual ActiveDx=30.750mm; 30.720=pitch(=120micron)*512 -->
 <Constant name="DSActiveDx"          value="30.720*mm"/> <!-- Actual ActiveDx=30.770mm; 30.720=pitch(=80micron)*768 -->
 <Constant name="ActiveDy"            value="58.4425*mm"/>
 <Constant name="WaferZ"              value="12.33*mm"/>
 <Constant name="Tol"                 value="0.01*mm"/>
</ConstantsSection>

<SolidSection label="tibmodpar.xml">
 <Box name="TIBSSModule"            dx="[tibmodpar:ModuleDx]"    
       dy="[tibmodpar:SSModuleDy]"   dz="[tibmodpar:ModuleDz]"/>
 <Box name="TIBDSModuleMainPart"            dx="[tibmodpar:ModuleDx]"    
      dy="[tibmodpar:DSModuleDy]"   dz="[tibmodpar:ModuleDz]"/>
 <Box name="TIBDSModuleSideCutL"            dx="[tibmodpar:DSModuleSideCutDx]"    
      dy="[tibmodpar:DSModuleSideCutDy]"   dz="[tibmodpar:ModuleDz]+[tibmodpar:SideCutExtraZ]"/>
 <Box name="TIBDSModuleSideCutR"            dx="[tibmodpar:DSModuleSideCutDx]"    
      dy="[tibmodpar:DSModuleSideCutDy]"   dz="[tibmodpar:ModuleDz]+[tibmodpar:SideCutExtraZ]"/>
 <SubtractionSolid name="TIBDSModuleLeftCutted">
   <rSolid name="TIBDSModuleMainPart"/>
   <rSolid name="TIBDSModuleSideCutL"/>
   <Translation x="-[DSModuleSideCutX]" y="[DSModuleSideCutY]" z="0."/>
 </SubtractionSolid>
 <SubtractionSolid name="TIBDSModule">
   <rSolid name="TIBDSModuleLeftCutted"/>
   <rSolid name="TIBDSModuleSideCutR"/>
   <Translation x="[DSModuleSideCutX]" y="[DSModuleSideCutY]" z="0."/>
 </SubtractionSolid>
 <Box name="TIBHybrid"            dx="[tibmodpar:HybridDx]"    
      dy="[tibmodpar:HybridDy]"   dz="[tibmodpar:HybridDz]"/>
 <Box name="TIBPA1"          dx="[PARPhiDx]"    dy="[PADy]"    dz="[PARPhiDz]"/>
 <Box name="TIBSSWafer"             dx="[tibmodpar:SSWaferDx]" 
      dy="[tibmodpar:WaferDy]"    dz="[tibmodpar:WaferDz]"/>
 <Box name="TIBSSActive"            dx="[tibmodpar:SSActiveDx]" 
      dy="[tibmodpar:ActiveDy]"   dz="[tibmodpar:ActiveDz]"/>
 <Box name="TIBDSWafer"             dx="[tibmodpar:DSWaferDx]" 
      dy="[tibmodpar:WaferDy]"    dz="[tibmodpar:WaferDz]"/>
 <Box name="TIBDSActive"            dx="[tibmodpar:DSActiveDx]" 
      dy="[tibmodpar:ActiveDy]"   dz="[tibmodpar:ActiveDz]"/>
 <Box name="TIBModCFFrame"   dx="[tibmodpar:ModuleDx]" 
			     dy="[tibmodpar:CFFrameDy]" dz="[tibmodpar:CFFrameDz]"/>
 <Box name="TIBModCFFrameHole"   
                             dx="[tibmodpar:CFFrameHoleDx]" 
			     dy="[tibmodpar:CFFrameDy]" dz="[tibmodpar:CFFrameHoleDz]"/>
 <Box name="TIBModCFFrameHybRPhi" 
                             dx="[tibmodpar:CFFrameHybRPhiDx]" 
			     dy="[tibmodpar:CFFrameDy]" dz="[tibmodpar:CFFrameHybDz]"/>
 <Box name="TIBModKaptonBoxRPhi" dx="[tibmodpar:ModuleDx]" 
			     dy="[tibmodpar:KaptonBoxDy]" dz="[tibmodpar:KaptonBoxDz]"/>
 <Box name="TIBModKaptonBoxHole"   dx="[tibmodpar:KaptonBoxHoleDx]" 
			     dy="[tibmodpar:KaptonBoxDy]" dz="[tibmodpar:KaptonBoxHoleDz]"/>

<!-- Module Ledges definitions -->
<Box name="TIBModLedgeBox"   dx="[tibmodpar:LedgeBoxDx]" 
			     dy="[tibmodpar:LedgeBoxDy]" dz="[tibmodpar:ModuleDz]"/>
<Box name="TIBModHybLedgeNoCut" dx="[tibmodpar:LedgeBoxDx]" 
			        dy="[tibmodpar:LedgeBoxDy]"  dz="[tibmodpar:HybLedgeSideDz]"/>
<Box name="TIBModHybLedgeCut"   dx="[tibmodpar:LedgeBoxDx]-2*[tibmodpar:HybLedgeSideDx]" 
			        dy="[tibmodpar:LedgeBoxDy]"  dz="[tibmodpar:HybLedgeSideDz]-[tibmodpar:HybLedgeDz]"/>
<SubtractionSolid name="TIBModHybLedge">
   <rSolid name="TIBModHybLedgeNoCut"/>
   <rSolid name="TIBModHybLedgeCut"/>
   <Translation x="[zero]" y="[zero]" z="[tibmodpar:HybLedgeDz]"/>
</SubtractionSolid>
<Box name="TIBModDummyLedge"    dx="[tibmodpar:LedgeBoxDx]" 
			        dy="[tibmodpar:LedgeBoxDy]"  dz="[tibmodpar:DummyLedgeDz]"/>

<!-- AOH Ledges definitions -->
<Box name="TIBAOHLedgeNoCut"    dx="[tibmodpar:LedgeBoxDx]" 
			        dy="[tibmodpar:LedgeBoxDy]" dz="[tibmodpar:AOHLedgeSideDz]"/>
<Box name="TIBAOHLedgeCut"      dx="[tibmodpar:LedgeBoxDx]-2*[tibmodpar:AOHLedgeSideDx]" 
			        dy="[tibmodpar:LedgeBoxDy]"  dz="[tibmodpar:AOHLedgeSideDz]-[tibmodpar:AOHLedgeDz]"/>
<SubtractionSolid name="TIBAOHLedge">
   <rSolid name="TIBAOHLedgeNoCut"/>
   <rSolid name="TIBAOHLedgeCut"/>
   <Translation x="[zero]" y="[zero]" z="[tibmodpar:AOHLedgeDz]"/>
</SubtractionSolid>

<!-- AOH Boxes definitions -->
<Box name="TIBSSAOHBox"    dx="[tibmodpar:SSAOHBoxDx]" 
			   dy="[tibmodpar:AOHBoxDy]" dz="[tibmodpar:AOHBoxDz]"/>
<Box name="TIBDSAOHBox"    dx="[tibmodpar:DSAOHBoxDx]" 
			   dy="[tibmodpar:AOHBoxDy]" dz="[tibmodpar:AOHBoxDz]"/>

</SolidSection>

<LogicalPartSection label="tibmodpar.xml">
 <LogicalPart name="TIBModCFFrameRPhi" category="unspecified">
  <rSolid name="tibmodpar:TIBModCFFrame"/>
  <rMaterial name="trackermaterial:T_CarbonFibreStr"/>
 </LogicalPart>
 <LogicalPart name="TIBModCFFrameHybRPhi" category="unspecified">
  <rSolid name="tibmodpar:TIBModCFFrameHybRPhi"/>
  <rMaterial name="trackermaterial:T_CarbonFibreStr"/>
 </LogicalPart>
 <LogicalPart name="TIBModCFFrameHole" category="unspecified">
  <rSolid name="tibmodpar:TIBModCFFrameHole"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
 <LogicalPart name="TIBModKaptonBoxRPhi" category="unspecified">
  <rSolid name="tibmodpar:TIBModKaptonBoxRPhi"/>
  <rMaterial name="tibmaterial:TIB_ModKaptonBox"/>
 </LogicalPart>
 <LogicalPart name="TIBModKaptonBoxHole" category="unspecified">
  <rSolid name="tibmodpar:TIBModKaptonBoxHole"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
 <LogicalPart name="TIBPA1" category="unspecified">
  <rSolid name="TIBPA1"/>
  <rMaterial name="tibtidcommonmaterial:TIBTID_PA"/>
 </LogicalPart>
 <LogicalPart name="TIBModLedgeBox" category="unspecified">
  <rSolid name="TIBModLedgeBox"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
 <LogicalPart name="TIBModHybLedge" category="unspecified">
  <rSolid name="TIBModHybLedge"/>
  <rMaterial name="tibmaterial:TIB_ModHybLedge"/>
 </LogicalPart>
 <LogicalPart name="TIBModDummyLedge" category="unspecified">
  <rSolid name="TIBModDummyLedge"/>
  <rMaterial name="tibmaterial:TIB_ModDummyLedge"/>
 </LogicalPart>
 <LogicalPart name="TIBAOHLedge" category="unspecified">
  <rSolid name="TIBAOHLedge"/>
  <rMaterial name="tibmaterial:TIB_AOHLedge"/>
 </LogicalPart>
 <LogicalPart name="TIBSSAOHBox" category="unspecified">
  <rSolid name="TIBSSAOHBox"/>
  <rMaterial name="tibmaterial:TIB_SSAOHBox"/>
 </LogicalPart>
 <LogicalPart name="TIBDSAOHBox" category="unspecified">
  <rSolid name="TIBDSAOHBox"/>
  <rMaterial name="tibmaterial:TIB_DSAOHBox"/>
 </LogicalPart>
</LogicalPartSection>

<RotationSection label="tibmodpar.xml">
  <Rotation name="Rphi"  thetaX="90*deg"  phiX="180*deg"     thetaY="0*deg"
                         phiY="90*deg"    thetaZ="90*deg"  phiZ="90*deg" />
  <Rotation name="SterB" thetaX="95.7296*deg" phiX="0*deg" thetaY="5.7296*deg"
                         phiY="0*deg"     thetaZ="90*deg"  phiZ="270*deg" />
  <Rotation name="SterA" thetaX="84.2704*deg" phiX="0*deg" thetaY="-5.7296*deg"
                         phiY="0*deg"     thetaZ="90*deg"  phiZ="270*deg" />
  <Rotation name="CFFrameSterB" 
                         thetaX="90.*deg" phiX="180.*deg" 
                         thetaY="90.*deg" phiY="270.*deg"     
                         thetaZ="0.*deg"  phiZ="0.*deg" />
  <Rotation name="CFFrameHoleSterA" 
                             thetaX="90.*deg-[StereoAngle]" phiX="0.*deg" 
                             thetaY="90.*deg"               phiY="90.*deg"     
                             thetaZ="[StereoAngle]"         phiZ="180.*deg" />
  <Rotation name="KaptonBoxHoleSterB" thetaX="84.2704*deg" phiX="0*deg" thetaY="-5.7296*deg"
                         phiY="0*deg"     thetaZ="90*deg"  phiZ="270*deg" />
  <Rotation name="KaptonBoxHoleSterA" 
                             thetaX="[StereoAngle]"         phiX="180.*deg" 
                             thetaY="90.*deg"               phiY="90.*deg"     
                             thetaZ="90.*deg+[StereoAngle]" phiZ="180.*deg" />
  <Rotation name="PAB"   thetaX="180*deg" phiX="0*deg"     thetaY="90*deg"
                         phiY="270*deg"   thetaZ="90*deg"  phiZ="180*deg" />
  <Rotation name="PAA"   thetaX="180*deg" phiX="0*deg"     thetaY="90*deg" 
                         phiY="90*deg"    thetaZ="90*deg"  phiZ="0*deg" />
</RotationSection>

<PosPartSection label="tibmodpar.xml">
 <PosPart copyNumber="1">
   <rParent name="tibmodpar:TIBModCFFrameRPhi"/>
   <rChild name="tibmodpar:TIBModCFFrameHole"/>
    <Translation x="[zero]"   y="[zero]" 
                 z="[tibmodpar:CFFrameHoleZ]-[tibmodpar:CFFrameHoleOffset]" />
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="tibmodpar:TIBModKaptonBoxRPhi"/>
   <rChild name="tibmodpar:TIBModKaptonBoxHole"/>
    <Translation x="[zero]"   y="[zero]" 
                 z="[tibmodpar:KaptonBoxHoleZ]" />
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="tibmodpar:TIBModLedgeBox"/>
   <rChild name="tibmodpar:TIBModHybLedge"/>
    <Translation x="[zero]"   y="[zero]" 
                 z="-[tibmodpar:ModuleDz]+[tibmodpar:HybLedgeSideDz]" />
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="tibmodpar:TIBModLedgeBox"/>
   <rChild name="tibmodpar:TIBModDummyLedge"/>
    <Translation x="[zero]" y="[zero]" 
                 z="[tibmodpar:ModuleDz]-[tibmodpar:DummyLedgeDz]" />
 </PosPart>

</PosPartSection>

</DDDefinition>
