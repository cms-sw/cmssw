<?xml version="1.0"?>
<DDDefinition xmlns="http://www.cern.ch/cms/DDL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.cern.ch/cms/DDL ../../../DetectorDescription/Schema/DDLSchema.xsd">

<ConstantsSection label="pixfwdOuterDiskZminus.xml" eval="true">
  <Constant name="OuterRingRMin"        value="165.3*mm"/><!-- see inner disk comments -->
  <Constant name="OuterRingRMax"        value="[OuterRingRMin]+2.1*mm"/>
  <Constant name="OuterRingCFRMin"      value="[OuterRingRMax]"/>
  <Constant name="OuterRingCFRMax"      value="[OuterRingCFRMin]+0.5*mm"/>
  <Constant name="OuterRingHalfWidth"   value="44.0*mm/2.0"/><!-- see Algorithm parameters below -->
  <Constant name="OuterRingZ"           value="[pixfwdDisks:DiskHalfWidth]-[OuterRingHalfWidth]"/>
  <Constant name="InnerRingRMax"      value="90.05*mm"/>
  <Constant name="InnerRingRMin"      value="[InnerRingRMax]-2.5*mm"/>
  <Constant name="InnerRingCFRMax"     value="[InnerRingRMin]"/>
  <Constant name="InnerRingCFRMin"     value="[InnerRingCFRMax]-0.5*mm"/>
  <Constant name="InnerRingHalfWidth"   value="38.0*mm/2.0"/><!-- see Algorithm parameters below -->
  <Constant name="InnerRingZ" value="[pixfwdDisks:DiskHalfWidth]-[InnerRingHalfWidth]"/>
</ConstantsSection>
 

<!-- support ring solids -->
<!-- each Algorithm creates on composite (union) solid that describes a cut
     ring according to the given outline. The z_l and z_t arrays describe the 
     -Z and +Z sides by giving the Z value for each of the values of the Phi
     array. The z values are only considered relatively, the object will be 
     centered around the origin and has to be placed using a PosPart tag.
     There are two instances each, for the Core and Skin (CF), which use the
     same parameters. The parameters are not defined in-place, but names are
     passed, which are defined in a different file, to avoid duplication.
--> 
<Algorithm name="track:DDCutTubsFromPoints">
  <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
  <String  name="SolidName"        value="PixelForwardOuterDiskOuterRing"/> 
  <Numeric name="rMin"             value="[OuterRingRMin]"/>
  <Numeric name="rMax"             value="[OuterRingRMax]"/>
  <String  name="Phi"              value="pixfwdSupportRingParameters:OuterDiskOuterRing_Phi"/>
  <String  name="z_t"              value="pixfwdSupportRingParameters:OuterDiskOuterRing_z_t_Minus"/>
  <String  name="z_l"              value="pixfwdSupportRingParameters:OuterDiskOuterRing_z_l_Minus"/>
  <!-- min: -335 max: -291 width: 44 -->
</Algorithm>
<Algorithm name="track:DDCutTubsFromPoints">
  <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
  <String  name="SolidName"        value="PixelForwardOuterDiskCFOuterRing"/> 
  <Numeric name="rMin"             value="[OuterRingCFRMin]"/>
  <Numeric name="rMax"             value="[OuterRingCFRMax]"/>
  <String  name="Phi"              value="pixfwdSupportRingParameters:OuterDiskOuterRing_Phi"/>
  <String  name="z_t"              value="pixfwdSupportRingParameters:OuterDiskOuterRing_z_t_Minus"/>
  <String  name="z_l"              value="pixfwdSupportRingParameters:OuterDiskOuterRing_z_l_Minus"/>
</Algorithm>
<Algorithm name="track:DDCutTubsFromPoints">
  <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
  <String  name="SolidName"        value="PixelForwardOuterDiskInnerRing"/> 
  <Numeric name="rMin"             value="[InnerRingRMin]"/>
  <Numeric name="rMax"             value="[InnerRingRMax]"/>
  <String  name="Phi"              value="pixfwdSupportRingParameters:OuterDiskInnerRing_Phi"/>
  <String  name="z_t"              value="pixfwdSupportRingParameters:OuterDiskInnerRing_z_t_Minus"/>
  <String  name="z_l"              value="pixfwdSupportRingParameters:OuterDiskInnerRing_z_l_Minus"/>
  <!-- min: -499 max: -461 width: 38 -->
</Algorithm>
<Algorithm name="track:DDCutTubsFromPoints">
  <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
  <String  name="SolidName"        value="PixelForwardOuterDiskCFInnerRing"/> 
  <Numeric name="rMin"             value="[InnerRingCFRMin]"/>
  <Numeric name="rMax"             value="[InnerRingCFRMax]"/>
  <String  name="Phi"              value="pixfwdSupportRingParameters:OuterDiskInnerRing_Phi"/>
  <String  name="z_t"              value="pixfwdSupportRingParameters:OuterDiskInnerRing_z_t_Minus"/>
  <String  name="z_l"              value="pixfwdSupportRingParameters:OuterDiskInnerRing_z_l_Minus"/>
</Algorithm>
 
<LogicalPartSection label="pixfwdOuterDiskZminus.xml">
 <LogicalPart name="PixelForwardOuterDiskInnerRing" category="support">
  <rSolid name="PixelForwardOuterDiskInnerRing"/>
  <rMaterial name="materials:C_C_OuterInnerRing"/>
 </LogicalPart>

 <LogicalPart name="PixelForwardOuterDiskOuterRing" category="support">
  <rSolid name="PixelForwardOuterDiskOuterRing"/>
  <rMaterial name="materials:C_C_OuterOuterRing"/>
 </LogicalPart>

 <LogicalPart name="PixelForwardOuterDiskCFInnerRing" category="support">
  <rSolid name="PixelForwardOuterDiskCFInnerRing"/>
  <rMaterial name="materials:FPix_CFSkin_OuterInnerRing"/>
 </LogicalPart>

 <LogicalPart name="PixelForwardOuterDiskCFOuterRing" category="support">
  <rSolid name="PixelForwardOuterDiskCFOuterRing"/>
  <rMaterial name="materials:FPix_CFSkin_OuterOuterRing"/>
 </LogicalPart>


</LogicalPartSection>


<PosPartSection label="pixfwdOuterDiskZminus.xml">
  <PosPart copyNumber="1">
    <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
    <rChild name="pixfwdOuterDiskZminus:PixelForwardOuterDiskInnerRing"/>
    <Translation x="0.*mm" y="0.*mm" z="[InnerRingZ]"/>
  </PosPart>

  <PosPart copyNumber="1">
    <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
    <rChild name="pixfwdOuterDiskZminus:PixelForwardOuterDiskOuterRing"/>
    <Translation x="0.*mm" y="0.*mm" z="[OuterRingZ]"/>
  </PosPart>

  <PosPart copyNumber="1">
    <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
    <rChild name="pixfwdOuterDiskZminus:PixelForwardOuterDiskCFInnerRing"/>
    <Translation x="0.*mm" y="0.*mm" z="[InnerRingZ]"/>
  </PosPart>

  <PosPart copyNumber="1">
    <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
    <rChild name="pixfwdOuterDiskZminus:PixelForwardOuterDiskCFOuterRing"/>
    <Translation x="0.*mm" y="0.*mm" z="[OuterRingZ]"/>
  </PosPart>


  <PosPart copyNumber="2">
    <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
    <rChild name="pixfwdOuterDiskZminus:PixelForwardOuterDiskInnerRing"/>
    <Translation x="0.*mm" y="0.*mm" z="[InnerRingZ]"/>
    <rRotation name="pixfwdCommon:Z180" />
  </PosPart>

  <PosPart copyNumber="2">
    <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
    <rChild name="pixfwdOuterDiskZminus:PixelForwardOuterDiskOuterRing"/>
    <Translation x="0.*mm" y="0.*mm" z="[OuterRingZ]"/>
    <rRotation name="pixfwdCommon:Z180" />
  </PosPart>

  <PosPart copyNumber="2">
    <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
    <rChild name="pixfwdOuterDiskZminus:PixelForwardOuterDiskCFInnerRing"/>
    <Translation x="0.*mm" y="0.*mm" z="[InnerRingZ]"/>
    <rRotation name="pixfwdCommon:Z180" />
  </PosPart>

  <PosPart copyNumber="2">
    <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
    <rChild name="pixfwdOuterDiskZminus:PixelForwardOuterDiskCFOuterRing"/>
    <Translation x="0.*mm" y="0.*mm" z="[OuterRingZ]"/>
    <rRotation name="pixfwdCommon:Z180" />
  </PosPart>
</PosPartSection>

<!-- Blades -->

<Algorithm name="track:DDPixPhase1FwdDiskAlgo">
  <rParent name="pixfwdDisks:PixelForwardDiskZminus"/>
  <String  name="ChildName"        value="pixfwdbladeOuterZminus:PixelForwardBlade"/> 
  <Numeric name="StartCopyNo"      value="22"/>
  <Numeric name="NumberOfBlades"   value="34"/>
  <Numeric name="BladeAngle"       value="20*deg"/>
  <Numeric name="BladeTilt"        value="0*deg"/>
  <Numeric name="BladeCommonZ"     value="-0.825*mm"/>
  <Vector  name="BladeZShift" type="numeric" nEntries="34">
   25.381*mm, 22.881*mm, 20.381*mm, 17.881*mm, 15.381*mm, 12.881*mm, 10.381*mm, 7.881*mm,
   25.381*mm, 22.881*mm, 20.381*mm, 17.881*mm, 15.381*mm, 12.881*mm, 10.381*mm, 7.881*mm, 3.381*mm,
   25.381*mm, 22.881*mm, 20.381*mm, 17.881*mm, 15.381*mm, 12.881*mm, 10.381*mm, 7.881*mm,
   25.381*mm, 22.881*mm, 20.381*mm, 17.881*mm, 15.381*mm, 12.881*mm, 10.381*mm, 7.881*mm, 3.381*mm
  </Vector> 
  <Numeric name="AnchorRadius"     value="127.819*mm"/>
  <String  name="RotationName"     value="pixfwdOuterDiskZminus:PixOuter"/>
  <String  name="FlagString"       value="YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY"/>
</Algorithm>

</DDDefinition>
