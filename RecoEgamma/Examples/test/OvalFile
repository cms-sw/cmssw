The variables immediatly below are internal values for this test suite.
The difffile tag implies that after each run the eventual file gsfElectronHistos.root is automatically
renamed as target.olog.gsfElectronHistos.root . This way, we can use the same output file
name for all the cmsRun configurations, yet keeping a separate copy of each kind of
execution.

<var name="TEST_OUTPUT_FILE" value="gsfElectronHistos.root">
<difffile name="gsfElectronHistos.root">

The DBS_* variables are configuration variables for dbs_discovery.py,
which prepares and send a query to the Data Discovery web server,
and receive as a result the corresponding list of input data files.

<var name="DBS_RELEASE" value="CMSSW_3_1_1">
<var name="DBS_TIER" value="RECO">

The VAL_* variables are configuration variables for newvalidation.csh,
which compares the histograms from two releases. newvalidation.csh relies
on the ROOT script newvalidation.C.

<var name="VAL_NEW_RELEASE" value="310pre11">
<var name="VAL_REF_RELEASE" value="310pre11">

%IMPORTANT% If we do not set specific VAL_REF_File values below, newvalidation.csh will
%IMPORTANT% compare the current histograms with the root files stored as ref in CVS. In such
%IMPORTANT% a case, the VAL_REF_RELEASE just above must be given the value corresponding
%IMPORTANT% to those ref file. We would like that the release of this file in the head
%IMPORTANT% of CVS contains the rigth value for the corresponding head release of root
%IMPORTANT% reference files. If you change the value of VAL_REF_RELEASE above and various
%IMPORTANT% VAL_REF_FILE below for a specific validation with specific ref files, please
%IMPORTANT% undo the changes before committing anything, so that CVS head always contains
%IMPORTANT% a consistent default configuration

The tags below are defining which are the output lines of reference, to be compared
from one execution to another. Currently, for each TH1 histogram, we require a constant
number of entries, and no more than 10% change on each histogram sum.

<diffline expr="^(TH1.Print Name  = [a-zA-Z_]+, Entries= ).*$">
<diffnumber expr="^TH1.Print Name  = [a-zA-Z_]+, Entries= (\d+),.*$" tolerance="20%">
<diffnumber expr="^TH1.Print Name  = [a-zA-Z_]+, Entries= \d+, Total sum= (\S+)$" tolerance="10%">
<diffline expr="^(h_\S+ has )\d+ entries of mean value \S+$">
<diffnumber expr="^h_\S+ has (\d+) entries of mean value \S+$" tolerance="20%">
<diffnumber expr="^h_\S+ has \d+ entries of mean value (\S+)$" tolerance="10%">
<!diffvar name="HISTO" expr="^TH1.Print Name  = [a-zA-Z_]+, Entries= \d+, Total sum= (\S+)$" tolerance="10%">

Here comes the concrete executables to run. They are split among few different
environments, each one defining the relevant variales for a given data sample.
Running dbs_discovery.py is only usefull to check the correctness of the list of
input data files returned by the data discovery web server. We guess that from
time to time we will have to upgrade the values DBS_* variable so to keep in
touch with changes in data catalog structure.

<file name="dbs_discovery.txt">
../../Configuration/test/RelValSingleElectronPt10-RECO.root
../../Configuration/test/RelValSingleElectronPt35-RECO.root
../../Configuration/test/RelValQCD_Pt_80_120-RECO.root
</file>

<environment name="FullSimStdStats">

  <var name="DBS_COND" value="MC_31X_V2-v1">
  <!var name="DBS_RELEASE" value="LOCAL">
  <!var name="DBS_COND" value="">

  <environment name="FullPt10">
    <var name="DBS_SAMPLE" value="RelValSingleElectronPt10">
    <var name="VAL_ANALYZER" value="GsfElectronMCAnalyzer">
    <executable name="dbs_discovery.py">
    <executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <executable name="newvalidation.csh" args="FullPt10 ${TEST_OUTPUT_FILE}">
  </environment>
  
  <environment name="FullPt35">
    <var name="DBS_SAMPLE" value="RelValSingleElectronPt35">
    <var name="VAL_ANALYZER" value="GsfElectronMCAnalyzer">
    <executable name="dbs_discovery.py">
    <executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <executable name="newvalidation.csh" args="FullPt35 ${TEST_OUTPUT_FILE}">
  </environment>
  
  <environment name="FullTTbar">
    <var name="DBS_SAMPLE" value="RelValTTbar">
    <var name="VAL_ANALYZER" value="GsfElectronMCAnalyzer">
    <executable name="dbs_discovery.py">
    <executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <executable name="newvalidation.csh" args="FullTTbar ${TEST_OUTPUT_FILE}">
  </environment>
  
  <environment name="FullZEEIdeal">
    <var name="DBS_SAMPLE" value="RelValZEE">
    <var name="VAL_ANALYZER" value="GsfElectronMCAnalyzer">
    <executable name="dbs_discovery.py">
    <executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <executable name="newvalidation.csh" args="FullZEEIdeal ${TEST_OUTPUT_FILE}">
  </environment>
  
  <environment name="FullZEEStartup">
    <var name="DBS_SAMPLE" value="RelValZEE">
    <var name="DBS_COND" value="STARTUP31X_V1-v2">
    <var name="VAL_ANALYZER" value="GsfElectronMCAnalyzer">
    <executable name="dbs_discovery.py">
    <executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <executable name="newvalidation.csh" args="FullZEEStartup ${TEST_OUTPUT_FILE}">
  </environment>
  
  <environment name="FullQcdPt80-120">
    <var name="DBS_SAMPLE" value="RelValQCD_Pt_80_120">
    <var name="VAL_ANALYZER" value="GsfElectronFakeAnalyzer">
    <executable name="dbs_discovery.py">
    <executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <executable name="newvalidation.csh" args="FullQcdPt80-120 ${TEST_OUTPUT_FILE}">
  </environment>
  
</environment>

<environment name="FullSimHighStats">

  <var name="DBS_COND" value="*MC_31X_V2-v1*-RECO">
  <!var name="DBS_RELEASE" value="LOCAL">
  <!var name="DBS_COND" value="">

  <environment name="HighFlatPt5To100">
    <var name="DBS_SAMPLE" value="RelValSingleElectronFlatPt5To100">
    <var name="VAL_ANALYZER" value="GsfElectronMCAnalyzer">
    <!executable name="dbs_discovery.py">
    <!executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <!executable name="newvalidation.csh" args="HighFlatPt5To100 ${TEST_OUTPUT_FILE}">
  </environment>

</environment>

<environment name="FastSim">

  <var name="VAL_REF_RELEASE" value="FastSim">
  <var name="DBS_COND" value="MC_31X_V2_FastSim-v1">
  <!var name="DBS_RELEASE" value="LOCAL">
  <!var name="DBS_COND" value="">

  <environment name="FastTTbar">
    <var name="DBS_SAMPLE" value="RelValTTbar">
    <var name="VAL_ANALYZER" value="GsfElectronMCAnalyzer">
    <executable name="dbs_discovery.py">
    <executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <var name="VAL_NEW_FILE" value="cmsRun.FullTTbar.olog.${TEST_OUTPUT_FILE}">
    <var name="VAL_REF_FILE" value="cmsRun.FastTTbar.olog.${TEST_OUTPUT_FILE}">
    <executable name="newvalidation.csh" args="FastTTbar">
  </environment>
  
  <environment name="FastZEEIdeal">
    <var name="DBS_SAMPLE" value="RelValZEE">
    <var name="VAL_ANALYZER" value="GsfElectronMCAnalyzer">
    <executable name="dbs_discovery.py">
    <executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <var name="VAL_NEW_FILE" value="cmsRun.FullZEEIdeal.olog.${TEST_OUTPUT_FILE}">
    <var name="VAL_REF_FILE" value="cmsRun.FastZEEIdeal.olog.${TEST_OUTPUT_FILE}">
    <executable name="newvalidation.csh" args="FastZEEIdeal">
  </environment>
  
  <environment name="FastZEEStartup">
    <var name="DBS_SAMPLE" value="RelValZEE">
    <var name="DBS_COND" value="STARTUP31X_V1_FastSim-v2">
    <var name="VAL_ANALYZER" value="GsfElectronMCAnalyzer">
    <executable name="dbs_discovery.py">
    <executable name="cmsRun" args="${VAL_ANALYZER}_cfg.py">
    <var name="VAL_NEW_FILE" value="cmsRun.FullZEEStartup.olog.${TEST_OUTPUT_FILE}">
    <var name="VAL_REF_FILE" value="cmsRun.FastZEEStartup.olog.${TEST_OUTPUT_FILE}">
    <executable name="newvalidation.csh" args="FastZEEStartup">
  </environment>
  
</environment>

