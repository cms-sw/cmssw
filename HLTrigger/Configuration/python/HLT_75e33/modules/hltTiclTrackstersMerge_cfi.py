import FWCore.ParameterSet.Config as cms

hltTiclTrackstersMerge = cms.EDProducer("TrackstersMergeProducer",
    cosangle_align = cms.double(0.9945),
    detector = cms.string('HGCAL'),
    e_over_h_threshold = cms.double(1),
    inferenceAlgo = cms.string('TracksterInferenceByCNNv4'),
    pluginInferenceAlgoTracksterInferenceByCNNv4 = cms.PSet(
      algo_verbosity = cms.int32(0),
      onnxModelPath = cms.FileInPath('RecoHGCal/TICL/data/ticlv4/onnx_models/energy_id_v0.onnx'),
      inputNames = cms.vstring('input:0'),
      outputNames = cms.vstring(
        'output/regressed_energy:0',
        'output/id_probabilities:0'
      ),
      eid_min_cluster_energy = cms.double(2.5),
      eid_n_layers = cms.int32(50),
      eid_n_clusters = cms.int32(10),
      doPID = cms.int32(1),
      doRegression = cms.int32(1),
      type = cms.string('TracksterInferenceByCNNv4')
    ),
    eta_bin_window = cms.int32(1),
    halo_max_distance2 = cms.double(4),
    layer_clusters = cms.InputTag("hltMergeLayerClusters"),
    layer_clustersTime = cms.InputTag("hltMergeLayerClusters","timeLayerCluster"),
    linkingPSet = cms.PSet(
        algo_verbosity = cms.int32(0),
        cutTk = cms.string('1.48 < abs(eta) < 3.0 && pt > 1. && quality("highPurity") && hitPattern().numberOfLostHits("MISSING_OUTER_HITS") < 5'),
        delta_tk_ts_interface = cms.double(0.03),
        delta_tk_ts_layer1 = cms.double(0.02),
        delta_ts_em_had = cms.double(0.03),
        delta_ts_had_had = cms.double(0.03),
        track_time_quality_threshold = cms.double(0.5),
        type = cms.string('LinkingAlgoByDirectionGeometric')
    ),
    mightGet = cms.optional.untracked.vstring,
    muons = cms.InputTag("hltPhase2L3Muons"),
    optimiseAcrossTracksters = cms.bool(True),
    phi_bin_window = cms.int32(1),
    propagator = cms.string('PropagatorWithMaterial'),
    pt_neutral_threshold = cms.double(2),
    pt_sigma_high = cms.double(2),
    pt_sigma_low = cms.double(2),
    resol_calo_offset_em = cms.double(1.5),
    resol_calo_offset_had = cms.double(1.5),
    resol_calo_scale_em = cms.double(0.15),
    resol_calo_scale_had = cms.double(0.15),
    track_max_eta = cms.double(3),
    track_max_missing_outerhits = cms.int32(5),
    track_min_eta = cms.double(1.48),
    track_min_pt = cms.double(1),
    tracks = cms.InputTag("hltGeneralTracks"),
    tracksTime = cms.InputTag("tofPID","t0"),
    tracksTimeErr = cms.InputTag("tofPID","sigmat0"),
    tracksTimeQual = cms.InputTag("mtdTrackQualityMVA","mtdQualMVA"),
    trackstersclue3d = cms.InputTag("hltTiclTrackstersCLUE3DHigh"),
    useMTDTiming = cms.bool(False)
)
